{extend name="base/common"/}

{block name="header"}
{/block}

{block name="body"}
<style>
    body{ background:#fff;}
    .footer{ border-top:none; background:none;}
</style>

<a href="{:url('/index/article/add')}" class="addarticle iconfont" title="添加文档">&#xe607;</a>

<div class="filewp">
    <div class="fileleft">
        <ul class="publicdiv filenav bort borb">
            <li class="iconfont filenavattr" onClick="casearch(1);" id="casearch_1"><span class="fs16 z">&#xe615;</span> 目录</li>
            <li class="iconfont" onClick="casearch(2);" id="casearch_2"><span class="fs16 z">&#xe604;</span> 搜索</li>
        </ul>
        <ul class="fileleftNav" id="fileleftNav">
            {foreach name="class_name_list" id="value" key="key" }
            <li>
                <p class="flienavtitle"><span class="iconfont" id="flienavicon_{$key}" onClick="flienavshow({$key});">&#xe624;</span><a href="javascript:void(0);">{$value}</a></p>
                <div class="publicdiv flienavclasswp" id="flienavclasswp_{$key}">
                    {foreach $new_class_list[$key] as $data} 
                    <a href="{:url('/index/article/detail?id='.$data['id'])}" class="flienavclass">{$data['title']}</a>
                    {/foreach}
                </div>
            </li>
            {/foreach}
        </ul>
        
        <div class="publicdiv dn" id="articlewp">
            <div class="publicdiv pt10 pb10 pl10 pr10 borb sizing">
                <div class="articleSearch">
                    <form action="" method="post" id="add_tag">
                        <input type="text" name="keyword" id="keyword" class="arsekeyword sizing" placeholder="请输入搜索的内容~" value="{$keyword}" />
                        <input type="button" class="sarsesub" onClick="sarsesub();" value="" />
                    </form>
                </div>
            </div>
            <ul class="publicdiv searchlist mt10">
                <div class="publicdiv" id="searchul">
                    <a href="javascript:void(0);" class="ellipsis">搜索结果的列表在此读取</a>
                </div>
                <div class="publicdiv c9 ac iconfont" style="margin:100px 0px 20px 0px;" id="searchon">
                    <span class="fs59">&#xe604;</span><br/>
                    暂无相关搜索结果！
                </div>
            </ul>
        </div>
        <script>
        function sarsesub(){
            jQuery('#searchul').html('');   //清空原有的数据
            var url = "{:url('/index/project/detail')}";
            jQuery.ajax({
                type: 'post',
                url: url,
                data: jQuery('#add_tag').serialize(),
                dataType: 'json',
                success: function(data){
                    if (data.result == 'success') {
                        var array = [];
                        jQuery.each(array, function(n, value){
                            //console.log(value);
                            jQuery('#searchon').hide(); //隐藏 暂无相关搜索结果！ 
                            jQuery('#searchul').append('<a href="' + value.url + '" class="ellipsis">' + value.name + '</a>'); //循环输出搜索结果
                        })
                    }else{
                        jQuery('#addpr').html(data.error).show(1).delay(2000).hide(1);
                    }
                }
            });
        }
        </script>
    </div>
    <div class="fileright sizing">
        <div class="filerightwp sizing">
            <h2 class="mt20 pb20 pt20 borb sizing">{$article_detail['title']}</h2>
            <p class="publicdiv mb10 lh25">
                发布者：<span class="text-primary mr20">{$article_detail['username']}</span>
                分类：<span class="mr20">{$article_detail['class_name']}</span>
                项目：<span class="mr20">{$article_detail['project_name']}</span>

                <a href="{:url('/index/article/add?id='.$article_id)}" class="btn-link iconfont y" title="编辑">&#xe71d; 编辑</a>
                <span class="y mr20">发布时间：{$article_detail['time']}</span>
            </p>

            <div class="publicdiv pt20 pb20 pl20 pr20 sizing">{$article_detail['contents']}</div>

        </div>
    </div>
</div>

<script>
    function flienavshow(id) {
        if (jQuery('#flienavclasswp_' + id).css('display') == 'none') {
            jQuery('#flienavicon_' + id).css({transform: 'rotate(90deg)'});
            jQuery('#flienavclasswp_' + id).slideDown();
        } else {
            jQuery('#flienavicon_' + id).css({transform: 'rotate(0deg)'});
            jQuery('#flienavclasswp_' + id).slideUp();
        }

    }
</script>

<!--<div class="publicdiv mt20 bf pb20 mb10 sizing" id="action_wrap">
    <div style="width:1100px; margin:0px auto;">
        <div class="publicdiv mt20 bor pl20 pr20 sizing">
        <div class="publicdiv borb pl20 pr20 sizing">
            <h2 class="mt20 pb20 pt20 pl20 pr20 ac sizing">{$article_detail['title']}</h2>
            <p class="publicdiv mt20 mb10 lh35">
                发布者：<span class="text-primary mr20">{$article_detail['username']}</span>
                分类：<span class="mr20">{$article_detail['class_name']}</span>
                项目：<span class="mr20">{$article_detail['project_name']}</span>
                
                <a href="{:url('/index/article/add?id='.$article_id)}" class="btn-link iconfont y" title="编辑">&#xe71d; 编辑</a>
                <span class="y mr20">发布时间：{$article_detail['time']}</span>
            </p>
        </div>
        
        <div class="publicdiv pt20 pb20 pl20 pr20 sizing">{$article_detail['contents']}</div>
        
        </div>
    </div>
</div>-->

{/block}