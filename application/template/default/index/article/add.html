{extend name="base/common"/}

{block name="header"}
{/block}

{block name="body"}
<div class="container" style="width:1170px;">
<div class="publicdiv pl20 pr20 pt8 bf sizing">
    <div class="publicdiv mb20 ptlrb10 bf sizing">
    <form action="{:url('/index/article/add?id='.$article_detail['id'])}" method="post" class="form-horizontal" role="form">
        <h3 class="ac">添加文档</h3>
            <div class="modal-body">
                    
                <div class="form-group w100 mrn mln z">
                    <label class="col-sm-2 control-label" style="width:130px;"><b class="cred">* </b>标题：</label>
                    <div class="col-sm-10 pln prn" style="width:910px;">
                        <input type="text" name="title" class="form-control" id="name" placeholder="请输入任务名称" value="{$article_detail['title']}">
                    </div>
                </div>
                
                <div class="form-group w100 mrn mln z">
                    <label class="col-sm-2 control-label" style="width:130px;"><b class="cred">* </b>分类：</label>
                    <div class="col-sm-10 pln prn" style="width:910px;">
                        <select name="class_id" class="form-control">
                            <option value='0'>无</option>
                            {foreach $sort_list as $temp_sort}
                            <option {if condition="$temp_sort['id'] == $article_detail['class']"}selected='selected'{/if} value="{$temp_sort['id']}" >{$temp_sort['name']}</option>
                            {/foreach}
                        </select>
                    </div>
                </div>
                
                <div class="form-group w100 mrn mln z">
                    <label class="col-sm-2 control-label" style="width:130px;"><b class="cred">* </b>项目：</label>
                    <div class="col-sm-10 pln prn" style="width:910px;">
                        <select name="project_id" class="form-control">
                            <option value='0'>无</option>
                            {foreach $project_list as $temp_project}
                            <option {if condition="$temp_project['id'] == $article_detail['project']"}selected='selected'{/if} value="{$temp_project['id']}" >{$temp_project['name']}</option>
                            {/foreach}
                        </select>
                    </div>
                </div>
                <div class="form-group w100 mrn mln z">
                    <label class="col-sm-2 control-label" style="width:130px;"><b class="cred">* </b>是否公开：</label>
                    <div class="col-sm-10 pln prn" style="width:910px;">
                        <label><input type="radio" name="acl" value="open" {if condition="$article_detail['acl'] == 'open'"}checked='checked'{/if} >公开</label>
                        <label><input type="radio" name="acl" value="private" {if condition="$article_detail['acl'] == 'private'"}checked='checked'{/if} >私有</label>
                    </div>
                </div>
                
                <script type="text/javascript" charset="utf-8" src="tpl_static/ueditor/ueditor.config.js"></script>
                <script type="text/javascript" charset="utf-8" src="tpl_static/ueditor/ueditor.all.min.js"></script>
                <script type="text/javascript" charset="utf-8" src="tpl_static/ueditor/lang/zh-cn/zh-cn.js"></script>

                <div class="form-group z">
                    <label class="col-sm-2 control-label" style="width:145px;"><b class="cred">* </b>任务说明：</label>
                    <div class="col-sm-10 pln" style="width:922px;">
                        <!--<textarea id="explainmessage" name="desc" class="form-control">{$task_details['desc']}</textarea>-->
                        <script id="editor" type="text/plain" class="z" name="contents" style="width:100% !important; height:450px;">{$article_detail['contents']}</script>
                    </div>
                </div>

                <script type="text/javascript">
                    //实例化编辑器
                    //建议使用工厂方法getEditor创建和引用编辑器实例，如果在某个闭包下引用该编辑器，直接调用UE.getEditor('editor')就能拿到相关的实例
                    //var ue = UE.getEditor('editor', {toolbars: [['fullscreen', 'source', 'undo', 'redo', 'italic', 'underline', 'fontborder', 'strikethrough', 'superscript', 'subscript', 'removeformat', 'formatmatch', 'autotypeset', 'blockquote', 'pasteplain', '|', 'forecolor', 'backcolor', 'insertorderedlist', 'insertunorderedlist', 'selectall', 'cleardoc']]});
                    var ue = UE.getEditor('editor');
                    
                    function disableBtn(str) {
                        var div = document.getElementById('btns');
                        var btns = UE.dom.domUtils.getElementsByTagName(div, "button");
                        for (var i = 0, btn; btn = btns[i++]; ) {
                            if (btn.id == str) {
                                UE.dom.domUtils.removeAttributes(btn, ["disabled"]);
                            } else {
                                btn.setAttribute("disabled", "true");
                            }
                        }
                    }
                    function enableBtn() {
                        var div = document.getElementById('btns');
                        var btns = UE.dom.domUtils.getElementsByTagName(div, "button");
                        for (var i = 0, btn; btn = btns[i++]; ) {
                            UE.dom.domUtils.removeAttributes(btn, ["disabled"]);
                        }
                    }
                </script>

                <script type="text/javascript">
                    $(document).ready(function () {
                        var begin_time = $("#begin_time").val();
                        var end_time = $("#end_time").val();
                        var myDate = new Date();
                        if (!begin_time) {
                            begin_time = myDate.toLocaleDateString();
                        }
                        if (!end_time) {
                            end_time = myDate.toLocaleDateString();
                        }
                        $('#begin_time').daterangepicker({singleDatePicker: true, format: 'YYYY-MM-DD', startDate: begin_time}, function (start, end, label) {
                            console.log(start.toISOString(), end.toISOString(), label);
                        });
                        $('#end_time').daterangepicker({singleDatePicker: true, format: 'YYYY-MM-DD', startDate: end_time}, function (start, end, label) {
                            console.log(start.toISOString(), end.toISOString(), label);
                        });
                    });
                </script>
                </div>
                <div class="modal-footer ptn mtn btno ac z w100">
                    <input type="submit" class="btn btn-primary btn-lg pl20 pr20" onClick="formsubif();" value="完成" />
                </div>
            </form>

    </div>
</div>
</div>
{/block}